<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Mark Park</title>
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
<link rel="stylesheet" href="https://unpkg.com/leaflet-routing-machine@3.2.12/dist/leaflet-routing-machine.css" />
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">

<style>
* {margin:0;padding:0;box-sizing:border-box;}
body {
    font-family:'Inter',sans-serif;
    background:#030303;
    color:white;
    overflow-x:hidden;
    -webkit-tap-highlight-color: transparent;
}

/* Keep your elegant background */
.background-container {
    position:fixed;inset:0;overflow:hidden;pointer-events:none;z-index:0;
}
.gradient-overlay {position:absolute;inset:0;
background:linear-gradient(to bottom right,rgba(99,102,241,.05),transparent,rgba(244,63,94,.05));
filter:blur(60px);
}
.elegant-shape{position:absolute;border-radius:50%;background:linear-gradient(to right,rgba(255,255,255,.08),transparent);
border:1px solid rgba(255,255,255,.1);
animation:float 10s ease-in-out infinite;will-change:transform;}
@keyframes float{0%,100%{transform:translateY(0)}50%{transform:translateY(10px)}}

.container{position:relative;z-index:1;max-width:1400px;margin:0 auto;padding:1rem;}

header{text-align:center;margin-bottom:1.5rem;}
h1{
    font-size:clamp(2rem,5vw,3.5rem);
    font-weight:800;
    background:linear-gradient(to right,rgb(165,180,252),white,rgb(252,165,165));
    -webkit-background-clip:text;-webkit-text-fill-color:transparent;
}
.subtitle{color:rgba(255,255,255,.6);font-weight:300;}

.main-grid{display:grid;grid-template-columns:1fr;gap:1.5rem;}
@media(min-width:1024px){.main-grid{grid-template-columns:2fr 1fr;}}

/* MAP section */
.map-section{
    position:relative;
    height:calc(100vh - 220px); /* fills screen nicely on phones */
    background:rgba(255,255,255,.03);
    border-radius:1rem;
    overflow:hidden;
    border:1px solid rgba(255,255,255,.1);
    box-shadow:0 10px 40px rgba(0,0,0,.4);
}
#map{width:100%;height:100%;}

/* Buttons */
.map-controls{position:absolute;top:.75rem;right:.75rem;z-index:1000;
display:flex;flex-direction:column;gap:.5rem;}
.btn{
    padding:.6rem 1rem;
    border:none;border-radius:.75rem;
    font-weight:600;font-size:.9rem;
    cursor:pointer;transition:transform .2s;
    backdrop-filter:blur(8px);
}
.btn:hover{transform:translateY(-2px);}
.btn-locate{background:rgba(59,130,246,.9);color:white;}
.btn-save{background:rgba(34,197,94,.9);color:white;}
.btn-navigate{background:rgba(168,85,247,.9);color:white;display:none;}
.btn-clear{background:rgba(239,68,68,.9);color:white;display:none;}

.info-panel{display:flex;flex-direction:column;gap:1rem;}
.card{
    background:rgba(255,255,255,.05);
    border:1px solid rgba(255,255,255,.1);
    border-radius:1rem;
    padding:1rem;
    box-shadow:0 4px 16px rgba(0,0,0,.3);
}
.card-title{font-weight:600;margin-bottom:.5rem;}
.location-info .info-item{margin-bottom:.5rem;}

.status-toast{
    position:fixed;bottom:1rem;left:50%;transform:translateX(-50%);
    padding:.8rem 1rem;border-radius:.5rem;
    font-weight:500;opacity:0;transition:opacity .3s,transform .3s;
    z-index:2000;
}
.status-toast.show{opacity:1;transform:translateX(-50%) translateY(-10px);}
.status-success{background:rgba(34,197,94,.9);}
.status-error{background:rgba(239,68,68,.9);}
.status-info{background:rgba(59,130,246,.9);}

/* Modal tweaks for mobile */
.modal-overlay{display:none;position:fixed;inset:0;background:rgba(0,0,0,.7);
z-index:3000;align-items:center;justify-content:center;padding:1rem;}
.modal-overlay.active{display:flex;}
.modal{
    width:100%;max-width:400px;
    background:#1a1a1a;border:1px solid rgba(255,255,255,.1);
    border-radius:1rem;padding:1rem;
}
#parking-notes{width:100%;min-height:80px;border-radius:.5rem;
background:rgba(255,255,255,.05);border:1px solid rgba(255,255,255,.2);
color:white;padding:.5rem;font-size:.9rem;}

/* Fix leaflet scaling */
.leaflet-routing-container,
.leaflet-control-zoom {
    transform: scale(1.2);
    transform-origin: bottom right;
}

/* ensure text legibility */
.leaflet-container a { font-size:14px !important; }
.leaflet-popup-content { font-size:15px !important; }

footer{text-align:center;color:rgba(255,255,255,.4);margin:1.5rem 0;}
</style>
</head>
<body>
<div class="background-container"><div class="gradient-overlay"></div></div>

<div class="container">
<header>
<h1>Mark Park</h1>
<p class="subtitle">Save your parking spot and navigate back to it</p>
</header>

<div class="main-grid">
<div class="map-section">
<div id="map"></div>
<div class="map-controls">
<button id="locate-btn" class="btn btn-locate">üìç Find</button>
<button id="save-btn" class="btn btn-save">üíæ Save</button>
<button id="navigate-btn" class="btn btn-navigate">üß≠ Navigate</button>
<button id="clear-btn" class="btn btn-clear">üóëÔ∏è Clear</button>
</div>
</div>

<div class="info-panel">
<div class="card">
<h2 class="card-title">üìç Saved Location</h2>
<div id="location-details">
<div class="empty-state" style="color:rgba(255,255,255,.5);text-align:center;">
üÖøÔ∏è No parking location saved yet
</div>
</div>
</div>
</div>
</div>

<footer>By AKSHATH</footer>
</div>

<div id="status-toast" class="status-toast"></div>

<div id="save-modal" class="modal-overlay">
<div class="modal">
<h3>Save Parking Location</h3>
<div id="current-location-display" style="margin-bottom:.5rem;color:#ccc;"></div>
<textarea id="parking-notes" placeholder="Enter parking notes"></textarea>
<div style="display:flex;gap:.5rem;">
<button id="cancel-btn" class="btn modal-btn-cancel" style="flex:1;background:#333;color:white;">Cancel</button>
<button id="confirm-save-btn" class="btn modal-btn-save" style="flex:1;background:rgb(34,197,94);color:white;">Save</button>
</div>
</div>
</div>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script src="https://unpkg.com/leaflet-routing-machine@3.2.12/dist/leaflet-routing-machine.js"></script>
<script>
let map,userMarker,parkingMarker,routingControl;
let savedLocation=JSON.parse(localStorage.getItem('savedParkingLocation'))||null;
const toast=document.getElementById('status-toast');
function showStatus(msg,type){
toast.textContent=msg;
toast.className=`status-toast status-${type} show`;
setTimeout(()=>toast.classList.remove('show'),3500);
}
function initMap(){
map=L.map('map',{zoomControl:true}).setView([12.9716,77.5946],14);
L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',{
attribution:'&copy; OpenStreetMap'
}).addTo(map);
if(savedLocation)addMarker(savedLocation);
}
function locateUser(){
if(!navigator.geolocation)return showStatus('Geolocation not supported','error');
navigator.geolocation.getCurrentPosition(pos=>{
const {latitude,longitude}=pos.coords;
if(!userMarker){
userMarker=L.marker([latitude,longitude]).addTo(map).bindPopup('You are here');
}else userMarker.setLatLng([latitude,longitude]);
map.setView([latitude,longitude],17);
showStatus('Location set!','success');
},()=>showStatus('Location failed','error'));
}
function addMarker(loc){
if(parkingMarker)map.removeLayer(parkingMarker);
parkingMarker=L.marker([loc.lat,loc.lng]).addTo(map)
.bindPopup('üÖøÔ∏è Parking Spot<br>'+ (loc.notes||'No notes'));
}
function saveLocation(){
if(!userMarker)return showStatus('Find your location first','error');
const pos=userMarker.getLatLng();
const notes=document.getElementById('parking-notes').value;
savedLocation={lat:pos.lat,lng:pos.lng,notes,timestamp:new Date().toLocaleString()};
localStorage.setItem('savedParkingLocation',JSON.stringify(savedLocation));
addMarker(savedLocation);
showStatus('Saved!','success');
document.getElementById('save-modal').classList.remove('active');
}
function navigateToParking(){
if(!savedLocation)return showStatus('No saved location','error');
navigator.geolocation.getCurrentPosition(pos=>{
const start=L.latLng(pos.coords.latitude,pos.coords.longitude);
const end=L.latLng(savedLocation.lat,savedLocation.lng);
if(routingControl){map.removeControl(routingControl);}
routingControl=L.Routing.control({
waypoints:[start,end],
lineOptions:{styles:[{color:'#a855f7',opacity:0.8,weight:5}]},
createMarker:()=>null
}).addTo(map);
showStatus('Route displayed','info');
});
}
function clearLocation(){
localStorage.removeItem('savedParkingLocation');
if(parkingMarker)map.removeLayer(parkingMarker);
if(routingControl)map.removeControl(routingControl);
savedLocation=null;showStatus('Cleared','success');
}
document.addEventListener('DOMContentLoaded',()=>{
initMap();
document.getElementById('locate-btn').onclick=locateUser;
document.getElementById('save-btn').onclick=()=>document.getElementById('save-modal').classList.add('active');
document.getElementById('confirm-save-btn').onclick=saveLocation;
document.getElementById('cancel-btn').onclick=()=>document.getElementById('save-modal').classList.remove('active');
document.getElementById('navigate-btn').onclick=navigateToParking;
document.getElementById('clear-btn').onclick=clearLocation;
});
</script>
</body>
</html>
